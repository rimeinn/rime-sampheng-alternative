algebra:
  special_syllable: # 整音
    - ["(^| )d'ruen($| )", "$1EOR$2"]
    - ["(^| )t'rangx($| )", "$1RKD$2"]
    - ["(^| )thr'et($| )", "$1TEQ$2"]
    - ["(^| )thr'eh($| )", "$1TEL$2"]
    - ["(^| )tr'uaix($| )", "$1RSI$2"]
    - ["(^| )ch'ruad($| )", "$1GLP$2"]
    - ["(^| )z'ren($| )", "$1DIR$2"]
    - ["(^| )zr'uen($| )", "$1DWR$2"]
    - ["(^| )zr'ux($| )", "$1DZK$2"]
    - ["(^| )cj'ap($| )", "$1VDZ$2"]
    - ["(^| )chj'ai($| )", "$1BDU$2"]
    - ["(^| )chj'aix($| )", "$1BDI$2"]
    - ["(^| )chj'ren($| )", "$1BIR$2"]
    - ["(^| )zj'e($| )", "$1CEJ$2"]
    - ["(^| )zj'op($| )", "$1CCZ$2"]
    - ["(^| )sj'amx($| )", "$1XDC$2"]
    - ["(^| )nj'aix($| )", "$1WDI$2"]
    - ["(^| )nj'e($| )", "$1WEJ$2"]
    - ["(^| )nj'rat($| )", "$1WKQ$2"]
    - ["(^| )j'aix($| )", "$1PDI$2"]
    - ["(^| )i'uaix($| )", "$1PSI$2"]

  preprocessing: # 预处理
    - ["j([aeou])", "ji$1"]
    - ["([iy])oi", "$1ei"]
    - ["([^aeo])u([xh]?)($| )", "$1ou$2$3"]
    - ["y([xh]?)($| )", "iau$1$2"]

  1: # 声母
    # 唇牙喉音，有重纽
    - ["(^| )ph", "$1Y"]
    - ["(^| )p", "$1U"]
    - ["(^| )b", "$1I"]
    - ["(^| )m", "$1O"]
    - ["(^| )([jiy])", "$1P$2"]
    - ["(^| )kh", "$1H"]
    - ["(^| )k", "$1J"]
    - ["(^| )g([^h])", "$1K$2"]
    - ["(^| )ng", "$1L"]
    - ["(^| )q", "$1;"]
    - ["(^| )gh", "$1N"]
    - ["(^| )h", "$1M"]
    # 舌齿音，无重纽
    - ["(^| )chj", "$1B"]
    - ["(^| )cj", "$1V"]
    - ["(^| )zj", "$1C"]
    - ["(^| )sj", "$1X"]
    - ["(^| )zsj", "$1Z"]
    - ["(^| )ch", "$1G"]
    - ["(^| )c", "$1F"]
    - ["(^| )z([^s])", "$1D$2"]
    - ["(^| )s", "$1S"]
    - ["(^| )zs", "$1A"]
    - ["(^| )th", "$1T"]
    - ["(^| )t", "$1R"]
    - ["(^| )d", "$1E"]
    - ["(^| )n", "$1W"]
    - ["(^| )l", "$1Q"]

  3: # 尾调
    - ["d($| )", "P$1"]
    - ["m($| )", "V$1"]
    - ["mx($| )", "C$1"]
    - ["mh($| )", "X$1"]
    - ["p($| )", "Z$1"]
    - ["n($| )", "R$1"]
    - ["nx($| )", "E$1"]
    - ["nh($| )", "W$1"]
    - ["t($| )", "Q$1"]
    - ["ng($| )", "F$1"]
    - ["ngx($| )", "D$1"]
    - ["ngh($| )", "S$1"]
    - ["k($| )", "A$1"]
    - ["([aeo])u($| )", "$1M$2"]
    - ["([aeo])ux($| )", "$1G$2"]
    - ["([aeo])uh($| )", "$1H$2"]
    - ["([aeiy])i($| )", "$1U$2"]
    - ["([aeiy])ix($| )", "$1I$2"]
    - ["([aeiy])ih($| )", "$1O$2"]
    - ["h($| )", "L$1"]
    - ["x($| )", "K$1"]
    - ["([a-z])($| )", "$1J$2"]

  2: # 介腹
    # a
    - ["rua", "L"]
    - ["ra", "K"]
    - ["([QrYUIOPHJKL;NM])ia", "$1F"]
    - ["ia", "J"]
    - ["([QrYUIOPHJKL;NM])ya", "$1G"]
    - ["ya", "H"]
    - ["ua", "S"]
    - ["a", "D"]
    # e
    - ["rue", "O"]
    - ["re", "I"]
    - ["([QrYUIOPHJKL;NM])ie", "$1R"]
    - ["ie", "U"]
    - ["([QrYUIOPHJKL;NM])ye", "$1T"]
    - ["ye", "Y"]
    - ["ue", "W"]
    - ["e", "E"]
    # ou
    - ["([QrYUIOPHJKL;NM])i[ou]", "$1V"]
    - ["i[ou]", "M"]
    - ["([QrYUIOPHJKL;NM])y[ou]", "$1B"]
    - ["y[ou]", "N"]
    - ["uo", "X"]
    - ["o", "C"]
    - ["ru", "H"]
    - ["uu", "P"]
    - ["u", "Z"]
    # i y
    - ["([QrYUIOPHJKL;NM])i", "$1A"]
    - ["([QrYUIOPHJKL;NM])y", "$1Q"]
    - ["i", ";"]
    - ["y", "P"]

  postprocessing:
    - ["[jr]", ""]

preedit_format:
  3: # 尾调
    - ["([\\w;][\\w;])r", "$1N平"]
    - ["([\\w;][\\w;])e", "$1N上"]
    - ["([\\w;][\\w;])w", "$1N去"]
    - ["([\\w;][\\w;])q", "$1N入"]
    - ["([\\w;][\\w;])f", "$1Q平"]
    - ["([\\w;][\\w;])d", "$1Q上"]
    - ["([\\w;][\\w;])s", "$1Q去"]
    - ["([\\w;][\\w;])a", "$1Q入"]
    - ["([\\w;][\\w;])v", "$1M平"]
    - ["([\\w;][\\w;])c", "$1M上"]
    - ["([\\w;][\\w;])x", "$1M去"]
    - ["([\\w;][\\w;])z", "$1M入"]
    - ["([\\w;][\\w;])u", "$1I平"]
    - ["([\\w;][\\w;])i", "$1I上"]
    - ["([\\w;][\\w;])o", "$1I去"]
    - ["([\\w;][\\w;])p", "$1D去"]
    - ["([\\w;][\\w;])j", "$1O平"]
    - ["([\\w;][\\w;])k", "$1O上"]
    - ["([\\w;][\\w;])l", "$1O去"]
    - ["([\\w;][\\w;])m", "$1U平"]
    - ["([\\w;][\\w;])g", "$1U上"]
    - ["([\\w;][\\w;])h", "$1U去"]
  1: # 声
    - ["(^|[ '])t([ioklrtfgvbaq]|[ph]Q)", "$1徹$2"]
    - ["(^|[ '])r([ioklrtfgvbaq]|[ph]Q)", "$1知$2"]
    - ["(^|[ '])e([ioklrtfgvbaq]|[ph]Q)", "$1澄$2"]
    - ["(^|[ '])w([ioklrtfgvbaq]|[ph]Q)", "$1娘$2"]
    - ["(^|[ '])w([yuhjnmp;])", "$1日$2"]
    - ["(^|[ '])t", "$1透"]
    - ["(^|[ '])r", "$1端"]
    - ["(^|[ '])e", "$1定"]
    - ["(^|[ '])w", "$1泥"]
    - ["(^|[ '])q", "$1來"]
    - ["(^|[ '])g([ioklrtfgvbaq]|[ph]Q)", "$1初$2"]
    - ["(^|[ '])f([ioklrtfgvbaq]|[ph]Q)", "$1莊$2"]
    - ["(^|[ '])d([ioklrtfgvbaq]|[ph]Q)", "$1崇$2"]
    - ["(^|[ '])s([ioklrtfgvbaq]|[ph]Q)", "$1生$2"]
    - ["(^|[ '])a([ioklrtfgvbaq]|[ph]Q)", "$1俟$2"]
    - ["(^|[ '])g", "$1清"]
    - ["(^|[ '])f", "$1精"]
    - ["(^|[ '])d", "$1從"]
    - ["(^|[ '])s", "$1心"]
    - ["(^|[ '])a", "$1邪"]
    - ["(^|[ '])b", "$1昌"]
    - ["(^|[ '])v", "$1章"]
    - ["(^|[ '])c", "$1常"]
    - ["(^|[ '])x", "$1書"]
    - ["(^|[ '])z", "$1船"]
    - ["(^|[ '])y", "$1滂"]
    - ["(^|[ '])u", "$1幫"]
    - ["(^|[ '])i", "$1並"]
    - ["(^|[ '])o", "$1明"]
    - ["(^|[ '])p([yuhjnm;p])", "$1以$2"]
    - ["(^|[ '])p", "$1云"]
    - ["(^|[ '])h", "$1溪"]
    - ["(^|[ '])j", "$1見"]
    - ["(^|[ '])k", "$1羣"]
    - ["(^|[ '])l", "$1疑"]
    - ["(^|[ ']);", "$1影"]
    - ["(^|[ '])n", "$1匣"]
    - ["(^|[ '])m", "$1曉"]
  2: # 韵部
    # 果
    - ["dO", "歌"]
    - ["sO", "¹ʷ戈"]
    - ["([见溪羣疑])[fj]O", "$1³戈"]
    - ["[gh]O", "³ʷ戈"]
    # 假
    - ["kO", "²麻"]
    - ["lO", "²ʷ麻"]
    - ["[fj]O", "³麻"]
    # 遇
    - ["cO", "模"]
    - ["[vm]O", "魚"]
    - ["[bn]O", "虞"]
    # 蟹
    - ["dI", "咍"]
    - ["sI", "灰"]
    - ["kI", "皆"]
    - ["lI", "ʷ皆"]
    - ["iO", "佳"]
    - ["oO", "ʷ佳"]
    - ["eO", "齊"]
    - ["wO", "ʷ齊"]
    - ["dD", "泰"]
    - ["sD", "ʷ泰"]
    - ["kD", "夬"]
    - ["lD", "ʷ夬"]
    - ["[fj]D", "廢"]
    - ["[gh]D", "ʷ廢"]
    - ["([幫滂並明見溪羣疑影曉])rD", "$1ᴮ祭"]
    - ["([幫滂並明見溪羣疑影曉])uD", "$1ᴬ祭"]
    - ["[ru]D", "祭"]
    - ["([幫滂並明見溪羣疑影曉])tD", "$1ᴮʷ祭"]
    - ["([幫滂並明見溪羣疑影曉])yD", "$1ᴬʷ祭"]
    - ["[ty]D", "ʷ祭"]
    # 止
    - ["([幫滂並明見溪羣疑影曉])rO", "$1ᴮ支"]
    - ["([幫滂並明見溪羣疑影曉])uO", "$1ᴬ支"]
    - ["[ru]O", "支"]
    - ["([幫滂並明見溪羣疑影曉])tO", "$1ᴮʷ支"]
    - ["([幫滂並明見溪羣疑影曉])yO", "$1ᴬʷ支"]
    - ["[ty]O", "ʷ支"]
    - ["([幫滂並明見溪羣疑影曉])aI", "$1ᴮ脂"]
    - ["([幫滂並明見溪羣疑影曉]);I", "$1ᴬ脂"]
    - ["[a;]I", "脂"]
    - ["([幫滂並明見溪羣疑影曉])qI", "$1ᴮʷ脂"]
    - ["([幫滂並明見溪羣疑影曉])pI", "$1ᴬʷ脂"]
    - ["[qp]I", "ʷ脂"]
    - ["[a;]O", "之"]
    - ["[ru]I", "微"]
    - ["[ty]I", "ʷ微"]
    # 效
    - ["dU", "豪"]
    - ["kU", "肴"]
    - ["([幫滂並明見溪羣疑影曉])rU", "$1ᴮ宵"]
    - ["([幫滂並明見溪羣疑影曉])uU", "$1ᴬ宵"]
    - ["[ru]U", "宵"]
    - ["eU", "蕭"]
    # 流
    - ["cU", "侯"]
    - ["[vm]U", "尤"]
    - ["[fj]U", "幽"]
    # 鹹
    - ["dM", "談"]
    - ["cM", "覃"]
    - ["kM", "銜"]
    - ["iM", "鹹"]
    - ["([幫滂並明見溪羣疑影曉])rM", "$1ᴮ鹽"]
    - ["([幫滂並明見溪羣疑影曉])uM", "$1ᴬ鹽"]
    - ["[ru]M", "鹽"]
    - ["[fj]M", "嚴"]
    - ["[gh]M", "凡"]
    - ["eM", "添"]
    # 深
    - ["([幫滂並明見溪羣疑影曉])aM", "$1ᴮ侵"]
    - ["([幫滂並明見溪羣疑影曉]);M", "$1ᴬ侵"]
    - ["[a;]M", "侵"]
    # 山
    - ["dN", "寒"]
    - ["sN", "桓"]
    - ["kN", "刪"]
    - ["lN", "ʷ刪"]
    - ["iN", "山"]
    - ["oN", "ʷ山"]
    - ["[fj]N", "元"]
    - ["[gh]N", "ʷ元"]
    - ["([幫滂並明見溪羣疑影曉])rN", "$1ᴮ仙"]
    - ["([幫滂並明見溪羣疑影曉])uN", "$1ᴬ仙"]
    - ["[ru]N", "仙"]
    - ["([幫滂並明見溪羣疑影曉])tN", "$1ᴮʷ仙"]
    - ["([幫滂並明見溪羣疑影曉])yN", "$1ᴬʷ仙"]
    - ["[ty]N", "ʷ仙"]
    - ["eN", "先"]
    - ["wN", "ʷ先"]
    # 臻
    - ["cN", "痕"]
    - ["xN", "魂"]
    - ["[vm]N", "欣"]
    - ["[bn]N", "文"]
    - ["([莊崇初生俟])[a;]N", "$1臻"]
    - ["([幫滂並明見溪羣疑影曉])aN", "$1ᴮ真"]
    - ["([幫滂並明見溪羣疑影曉]);N", "$1ᴬ真"]
    - ["[a;]N", "真"]
    - ["([幫滂並明見溪羣疑影曉])qN", "$1ᴮʷ真"]
    - ["[qp]N", "諄"]
    # 宕
    - ["dQ", "唐"]
    - ["sQ", "ʷ唐"]
    - ["[fj]Q", "陽"]
    - ["gQ", "ʷ陽"]
    # 江
    - ["hQ", "江"]
    # 梗
    - ["kQ", "²庚"]
    - ["lQ", "²ʷ庚"]
    - ["iQ", "耕"]
    - ["oQ", "ʷ耕"]
    - ["([幫滂並明見溪羣疑影曉])rQ", "$1³庚"]
    - ["([幫滂並明見溪羣疑影曉])tQ", "$1³ʷ庚"]
    - ["[ru]Q", "清"]
    - ["[ty]Q", "ʷ清"]
    - ["eQ", "青"]
    - ["wQ", "ʷ青"]
    # 曾
    - ["cQ", "登"]
    - ["xQ", "ʷ登"]
    - ["[a;]Q", "蒸"]
    - ["qQ", "ʷ蒸"]
    # 通
    - ["zQ", "¹東"]
    - ["[vm]Q", "³東"]
    - ["pQ", "冬"]
    - ["[bn]Q", "鍾"]

tone: # 缩合声调
  # 果
  歌: [哿, 个]
  戈: [果, 过]
  # 假
  麻: [马, 祃]
  # 遇
  模: [姥, 暮]
  魚: [語, 御]
  虞: [麌, 遇]
  # 蟹
  咍: [海, 代]
  灰: [贿, 隊]
  佳: [蟹, 卦]
  皆: [骇, 怪]
  齊: [薺, 霽]
  # 止
  之: [止, 志]
  脂: [旨, 至]
  支: [纸, 寘]
  微: [尾, 未]
  # 效
  豪: [皓, 号]
  肴: [巧, 效]
  宵: [小, 笑]
  蕭: [筱, 嘯]
  # 流
  侯: [厚, 候]
  尤: [有, 又]
  幽: [黝, 幼]
  # 山
  寒: [旱, 翰, 曷]
  桓: [缓, 换, 末]
  刪: [潸, 諫, 鎋]
  山: [產, 襉, 黠]
  元: [阮, 愿, 月]
  仙: [鮮, 線, 薛]
  先: [銑, 霰, 屑]
  # 臻
  痕: [很, 恨, 紇]
  魂: [混, 慁, 沒]
  真: [診, 震, 質]
  臻: [？, ？, 櫛]
  諄: [準, 稕, 術]
  欣: [隱, 焮, 迄]
  文: [吻, 問, 物]
  # 鹹
  談: [敢, 闞, 盍]
  覃: [感, 勘, 合]
  銜: [檻, 鑑, 狎]
  鹹: [豏, 陷, 洽]
  嚴: [儼, 釅, 業]
  鹽: [琰, 豔, 葉]
  凡: [范, 梵, 乏]
  添: [忝, 㮇, 帖]
  # 深
  侵: [寢, 沁, 緝]
  # 宕
  唐: [蕩, 宕, 鐸]
  陽: [養, 樣, 藥]
  # 江
  江: [講, 絳, 覺]
  # 梗
  庚: [梗, 敬, 陌]
  耕: [耿, 諍, 麥]
  清: [靜, 淨, 昔]
  青: [迥, 徑, 錫]
  # 曾
  登: [等, 嶝, 德]
  蒸: [拯, 證, 職]
  # 通
  東: [懂, 送, 屋]
  冬: [湩, 宋, 沃]
  鍾: [腫, 用, 燭]
